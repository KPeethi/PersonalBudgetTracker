{% extends "base.html" %}

{% block title %}Preferences - Expense Tracker{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row">
        <!-- Left Sidebar -->
        <div class="col-md-3 mb-4">
            <div class="card border-0 shadow-sm">
                <div class="card-body p-0">
                    <div class="list-group list-group-flush rounded">
                        <a href="#notification-settings" class="list-group-item list-group-item-action d-flex align-items-center">
                            <i class="bi bi-bell me-2"></i> Notification Settings
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-md-9">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1 class="h2 mb-0">Preferences</h1>
                <button type="button" class="btn btn-primary" id="save-preferences">Save Preferences</button>
            </div>

            <!-- Notification Settings -->
            <div class="card border-0 shadow-sm mb-4" id="notification-settings">
                <div class="card-header bg-white border-0">
                    <h5 class="mb-0">Notification Settings</h5>
                    <p class="text-muted small mb-0">Configure how and when you receive notifications.</p>
                </div>
                <div class="card-body">
                    <div class="form-check form-switch mb-3">
                        <input class="form-check-input" type="checkbox" id="email-notifications" checked>
                        <label class="form-check-label d-flex justify-content-between w-100" for="email-notifications">
                            <div>
                                <div>Email Notifications</div>
                                <div class="text-muted small">Receive important notifications via email.</div>
                            </div>
                        </label>
                    </div>
                    <div class="form-check form-switch mb-3">
                        <input class="form-check-input" type="checkbox" id="push-notifications" checked>
                        <label class="form-check-label d-flex justify-content-between w-100" for="push-notifications">
                            <div>
                                <div>Push Notifications</div>
                                <div class="text-muted small">Receive alerts on your device.</div>
                            </div>
                        </label>
                    </div>
                    <div class="form-check form-switch mb-3">
                        <input class="form-check-input" type="checkbox" id="weekly-reports" checked>
                        <label class="form-check-label d-flex justify-content-between w-100" for="weekly-reports">
                            <div>
                                <div>Weekly Financial Reports</div>
                                <div class="text-muted small">Get a summary of your weekly financial activity.</div>
                            </div>
                        </label>
                    </div>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="monthly-reports" checked>
                        <label class="form-check-label d-flex justify-content-between w-100" for="monthly-reports">
                            <div>
                                <div>Monthly Financial Reports</div>
                                <div class="text-muted small">Get a detailed monthly financial analysis.</div>
                            </div>
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Save preferences
    document.getElementById('save-preferences').addEventListener('click', function() {
        // Gather all preferences
        const preferences = {
            notifications: {
                email: document.getElementById('email-notifications').checked,
                push: document.getElementById('push-notifications').checked,
                weeklyReports: document.getElementById('weekly-reports').checked,
                monthlyReports: document.getElementById('monthly-reports').checked
            }
        };

        // Send to server
        fetch('/save_preferences', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(preferences)
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert('Preferences saved successfully!');
            } else {
                alert('Error saving preferences: ' + data.error);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('An error occurred while saving preferences.');
        });
    });
});
</script>
{% endblock %}